

## 查询操作

    查询一次和查询多次，在数据不变的情况下，查询结果都是一样的，select 是天然的幂等操作

## 删除操作

    删除操作也是幂等的，删除一次和删除多次都是把数据删除，但是可能返回的结果不同，删除的数据不存在，返回 0，删除成功，返回成功的条数

## 唯一索引

    通过唯一索引或联合唯一索引来防止新增脏数据

## 悲观锁/乐观锁/分布式锁

    这没啥好说的， 在高并发的情况下，数据库修改操作的基本处理

## 状态机幂等

    在修改之前进行已有数据的状态验证，判断当前数据是否可以继续操作，就跟乐观锁差不多的意思

## token 机制，防止页面重复提交

    1：数据提交前要向服务器申请 token，token 放到 redis或内存，token有效时间
    2：提交后台校验 token，同时删除 token，生成新的 token 返回

    注意：redis 要用删除操作来判断 token，删除成功代表 token 校验通过，如果采用 select+delete 来校验 token，存在并发问题，不建议使用

## 对外提供接口幂等

    使用 source（来源），seq（序列号） 来进行处理
    要求请求方必须提供这两个参数，这两个字段在数据库中添加联合唯一索引来进行约束，也可以通过其他手段，如定时缓存等